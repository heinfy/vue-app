(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8acfef8"],{1:function(e,t){},2:function(e,t){},3:function(e,t){},"352e":function(e,t,n){},4:function(e,t){},"5c8c":function(e,t,n){"use strict";var i=n("352e"),o=n.n(i);o.a},a548:function(e,t,n){},cf8d:function(e,t,n){"use strict";var i=n("a548"),o=n.n(i);o.a},d19a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("header-component",{attrs:{title:"pdf文件预览"}}),n("pdf-preview",{attrs:{url:e.url}})],1)},o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pdf-preview-container"},[n("span",{staticClass:"page_num"},[e._v(e._s(e.showPageNum)+"/"+e._s(e.docPages))]),e._l(e.docPages,(function(t,i){return n("div",{key:t,ref:"container",refInFor:!0,staticClass:"page-container",style:{height:e.pageHeight+"px"},attrs:{"data-index":i}},[e.renderList.includes(t)?n("canvas"):e._e()])}))],2)},c=[],a=(n("4de4"),n("4160"),n("a9e3"),n("159b"),n("fba4")),s=n.n(a),d={props:{url:{type:String,required:!0},renderPages:{type:Number,default:5},customScroll:{type:Boolean,default:!1},offsetHeight:{type:Number,default:0}},data:function(){return{doc:null,docPages:0,showPageNum:0,currentPage:0,pageHeight:0,renderList:[],timer:0}},watch:{url:{immediate:!0,handler:function(){this.getPDFFile()}}},created:function(){this.customScroll||document.addEventListener("scroll",this.scroll)},beforeDestroy:function(){document.removeEventListener("scroll",this.scroll)},methods:{getPDFFile:function(){var e=this;this.url&&(this.currentPage=0,s.a.getDocument({url:this.url,cMapUrl:"https://unpkg.com/pdfjs-dist@2.3.200/cmaps/",cMapPacked:!0,httpHeaders:{},verbosity:0}).promise.then((function(t){e.doc=t,e.docPages=t.numPages,e.showPageNum=1,e.$nextTick((function(){e.docPages&&e.scrollToPage(1)}))})))},scrollToPage:function(e){var t=this;if(this.currentPage!==e){this.currentPage=e;for(var n=[],i=e;i<=e+this.renderPages;i++)n.push(i);this.renderList=n.filter((function(e){return e<=t.docPages})),this.$nextTick((function(){t.renderList.forEach((function(e){t.renderPage(e)}))}))}},renderPage:function(e){var t=this;this.doc.getPage(e).then((function(n){var i=t.$refs.container[e-1];if(i){var o=i.querySelector("canvas");if(o&&!o.__rendered){var r=o.getContext("2d"),c=window.devicePixelRatio||1,a=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1,s=c/a,d=i.getBoundingClientRect(),l=n.getViewport({scale:1}),u=d.width,h=u/l.width*l.height;o.style.width="".concat(u,"px"),o.style.height="".concat(h,"px"),t.pageHeight=h,o.height=h*s,o.width=u*s,r.setTransform(s,0,0,s,0,0),n.render({canvasContext:r,viewport:n.getViewport({scale:u/l.width})}),o.__rendered=!0}}}))},scroll:function(){var e=document.body.scrollHeight,t=window.screen.height,n=document.documentElement.scrollTop||document.body.scrollTop;this.showPageNum=n+t<e?n<=0?1:this.docPages-Math.floor((e-n)/this.pageHeight):this.docPages,this.checkRender(document.documentElement)},checkRender:function(e){if(this.pageHeight){var t=e.scrollTop;e===document.documentElement&&(t=e.scrollTop||window.pageYOffset||document.body.scrollTop);var n=Math.floor((t-this.offsetHeight)/this.pageHeight);n=Math.max(n,1),n=Math.min(n,this.docPages),this.scrollToPage(n)}}}},l=d,u=(n("5c8c"),n("2877")),h=Object(u["a"])(l,r,c,!1,null,"1dce6e5e",null),f=h.exports,g={name:"pdfpreview",components:{pdfPreview:f},data:function(){return{url:"https://zm-cms-image.oss-cn-hangzhou.aliyuncs.com/defe19f8-7402-44ed-bd44-1479d612a837.pdf"}}},p=g,m=(n("cf8d"),Object(u["a"])(p,i,o,!1,null,"29383a56",null));t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-d8acfef8.9f5cf88b.js.map